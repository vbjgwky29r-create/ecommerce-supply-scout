# 电商货源猎手 Web 服务使用指南

## 📱 简介

电商货源猎手 Web 服务是一个轻量级的Web应用，可以让你在微信浏览器中直接使用电商货源猎手智能体的所有功能，包括：
- 文本对话
- 图片上传和分析
- 流式响应
- 市场趋势分析
- 供应商推荐
- ROI计算

## 🚀 快速开始

### 1. 启动服务

在项目根目录下运行：

```bash
./scripts/start_web.sh
```

或者手动启动：

```bash
cd src/web
python3 app.py
```

### 2. 在微信中访问

启动服务后，你会看到类似以下的输出：

```
访问地址:
   - 本地: http://localhost:5000
   - 局域网: http://192.168.1.100:5000
```

**在微信中使用步骤：**
1. 复制局域网地址（如 `http://192.168.1.100:5000`）
2. 在微信中发送给"文件传输助手"
3. 点击链接即可打开

### 3. 开始使用

- **发送文本消息**：直接输入问题，如"帮我搜索手机壳的市场趋势"
- **上传图片分析**：点击📷按钮上传产品图片，AI会自动识别并分析

## ⚙️ 配置说明

### 环境变量

可以通过环境变量配置服务：

| 变量名 | 默认值 | 说明 |
|--------|--------|------|
| `WEB_HOST` | `0.0.0.0` | 监听地址 |
| `WEB_PORT` | `5000` | 监听端口 |
| `WEB_DEBUG` | `False` | 调试模式 |
| `FLASK_SECRET_KEY` | `ecommerce-agent-secret-key-2024` | Flask密钥 |

### 示例配置

```bash
export WEB_HOST=0.0.0.0
export WEB_PORT=8080
export WEB_DEBUG=True

python3 src/web/app.py
```

## 🌐 网络配置

### 本地访问（仅自己可用）
- 直接使用 `http://localhost:5000`

### 局域网访问（同一WiFi下可用）
1. 确保手机和电脑在同一WiFi网络
2. 使用电脑的局域网IP访问
3. 在微信中打开链接

### 公网访问（任何人可用）

如果你需要让其他网络下的用户也能访问，需要使用内网穿透工具。推荐以下方案：

#### 方案1: 使用 ngrok（推荐）

1. 安装 ngrok：https://ngrok.com/download
2. 运行：
   ```bash
   ngrok http 5000
   ```
3. 复制生成的HTTPS链接，在微信中打开

#### 方案2: 使用 frp

需要一台有公网IP的服务器，配置frp服务端和客户端。

#### 方案3: 部署到云服务器

将项目部署到云服务器（阿里云、腾讯云等），配置好环境后启动服务。

## 📱 微信使用技巧

### 1. 添加到收藏

打开链接后，点击右上角"..." → "收藏"，下次直接从收藏中打开。

### 2. 添加到桌面

- iOS：点击"..." → "添加到主屏幕"
- Android：点击"..." → "添加到桌面"

### 3. 图片上传

点击📷按钮选择图片，支持：
- 相册照片
- 相机拍照
- 截图

支持格式：JPG、PNG、GIF、WEBP

### 4. 流式响应

AI的回复会实时显示，无需等待完整响应。

## 🎯 功能示例

### 示例1: 搜索市场趋势

```
用户：帮我搜索2024年面膜的市场趋势
```

AI会返回：
- 当前市场规模
- 增长率
- 热销产品类型
- 推荐关键词

### 示例2: 图片分析

上传一张产品图片后：

```
用户：帮我分析这个产品的市场潜力
```

AI会：
- 识别产品类型
- 分析产品特征
- 评估市场潜力
- 推荐供应商

### 示例3: 计算ROI

```
用户：进货价50元，售价120元，物流成本10元，帮我算一下ROI
```

AI会返回详细的利润分析和ROI计算结果。

## 🛠️ 故障排查

### 问题1: 无法在微信中打开

**原因**：
- 电脑和手机不在同一网络
- 防火墙阻止了连接

**解决方法**：
1. 确保电脑和手机连接同一WiFi
2. 关闭防火墙或添加白名单
3. 使用内网穿透工具

### 问题2: 图片上传失败

**原因**：
- 图片过大（超过16MB）
- 图片格式不支持

**解决方法**：
1. 压缩图片大小
2. 使用支持的格式（JPG、PNG、GIF、WEBP）

### 问题3: 连接断开

**原因**：
- 网络不稳定
- 服务端崩溃

**解决方法**：
1. 刷新页面重新连接
2. 检查服务是否正常运行
3. 查看服务端日志

## 📊 性能优化

### 1. 减少响应时间

- 使用SSD存储
- 优化数据库查询
- 启用缓存

### 2. 支持更多用户

- 使用Nginx做反向代理
- 部署到云服务器
- 使用负载均衡

## 🔒 安全建议

1. **不要在生产环境使用调试模式**
2. **设置强密码的FLASK_SECRET_KEY**
3. **使用HTTPS（通过nginx或云服务配置）**
4. **定期更新依赖**
5. **限制文件上传大小**

## 📝 常见问题

**Q: 可以在多个设备同时使用吗？**
A: 可以，每个设备独立连接，互不影响。

**Q: 对话历史会保存吗？**
A: 会话期间会保存历史，刷新页面后历史会清除（可在前端添加持久化）。

**Q: 支持多用户吗？**
A: 当前版本支持多用户同时使用，每个用户独立会话。

**Q: 可以自定义界面吗？**
A: 可以，修改 `src/web/templates/index.html` 文件。

## 🆘 技术支持

如有问题，请查看：
- 项目日志：`src/web/app.py` 的控制台输出
- 浏览器控制台：F12打开开发者工具
- Agent日志：查看Agent的运行状态

## 📄 许可证

本项目仅供学习和个人使用，商业使用请确保遵守相关法律法规。
